## 定数とマジックナンバー

プログラムの中にはたまに「マジックナンバー」と呼ばれる「正体不明の数字」が現れることがあります。
たとえば以下のコードを見て下さい。

```python
a = 100 * 1.08
print(a)
```

このコードが何をやっているか分かりません。
結論を言ってしまうと、1.08 は税率にあたり、税抜き100円が税込みいくらになるか確認しています。

1.08という数字を見て勘のいいかたであれば、「税率のようだ」と気づくかもしれませんが、
プログラミングはそのような「気づき」には頼ってほしくありません。
誰が見ても理解できるコードであるべきです。

このような場合、1.08 というよくわからない「マジックナンバー」ではなく「定数」を使うことが望ましいです。

定数は一回設定されたら変更されることがない特殊な変数であり、
その名前は大文字とアンダーバーで宣言されます。

例えば先程の税込み額の計算プログラムを、定数を使って書き直すと以下のようになります。

```python
TAX_RATE = 1.08

a = 100 * TAX_RATE
print(a)
# 108
```

上記のTAX_RATEが定数にあたります。
このサンプルのように、定数は一般的にプログラムのファイルの先頭で宣言されます。

定数はプログラムのパラメータとして使われることも多く、
ファイルを開いて定数の値を変更することでプログラムの挙動を変えることがよくあります。

例えば税率が10%に変更されたら、プログラム本体ではなく定数を書き換えることで対応します。

```python
TAX_RATE = 1.10

a = 100 * TAX_RATE
print(a)
# 110
```

もし仮に定数を使わずにプログラムを書いていたとしましょう。
つまり、1.08という税率の数字がプログラムの各所に散っているということです。

その場合、税率を8%から10%に変更するには、プログラム中に存在する1.08という値を、
全て1.10に書き換えていく作業が必要になります。
もちろん、税率以外にも1.08という数字が使われている可能性があるので、
プログラムを確認しながらの修正が必要です。
プログラムが巨大であれば、これはかなり面倒な作業になります。

一方、定数を使っていればそのような作業は不要になります。
定数の定義のみを書き直せば、それが定数を使う全部の場所で有効になるからです。

なお、「Pythonの定数」は厳密な意味では定数ではありません。

他のプログラミングを学んだことがある人であれば知っているかと思いますが、
一般的に「定数は上書きできない」という性質があります。

例えばC言語では以下のようなプログラムは実行(コンパイル)できません。

```c
TAX_RATE = 1.08
TAX_RATE = 1.10
```

定数が更新されていることを、C言語のコンパイラが見つけると、
それをエラーとするためです。

ただ、Pythonの定数は大文字を使った「単なる変数」と変わりがありませんので、
同様のプログラムは問題なく動作します。

```python
TAX_RATE = 1.08
TAX_RATE = 1.10
```

大文字で定数を作るというのは Python のプログラマたちが決めたルールです。
これには文法的な拘束はありませんので、再代入をしてもエラーとはなりません。

ただ、定数が変わることは誰も想定していないので、
定数への再代入は絶対にしないでください。
