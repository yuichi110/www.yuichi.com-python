## 標準入力

ユーザーがプログラムに入力を与えるのはコマンドライン引数だけではありません。
標準入力も用います。先ほどの生徒の成績を取得するプログラムを例に、標準入力がどのようなものか説明します。

コマンドライン引数はプログラムの「起動時」に入力値を指定しますが、
標準入力はプログラムの「起動後」に入力値を与えるものです。
さっそくですが、生徒の成績表示プログラムを標準入力のものに書き換えてみます。

```python
print('please input student name.')
# 標準入力
student = input()
print('your input is: ' + student)
```

1～2行目が変更されています。1行目は入力を促すテキストを出しているだけなのでたいしたことはないのですが、
重要なのは2行目です。これは以下のように動いています。

1.	input()関数が実行される
2.	pythonはユーザーからのキーボード入力を待つ
3.	ユーザーがキーボードでテキストを入力し、Enter(Return)を打つ
4.	pythonがユーザーからの入力を読み取り、input()関数がそれを文字列として返す
5.	変数 studentが返された文字列を格納

長々と書きましたが、要するにinput()を書いた場所で「ユーザー入力」が求められて、
ユーザーが入力した値がinput()から返されるということです。図にまとめると以下のようになります。

![image](./0105_image/02.jpg)

上記プログラムを実行すると次のようになります。

```
python test.py
please input student name.
taro
your input is: taro
```

なお、この標準入力を読み取る関数ですが python2 の頃は別名で raw_input() 関数でした。
間違えないように注意をしてください。

ほかにはsysモジュールのreadline関数も同じ目的で利用できます。
詳しくは書きませんが、以下のように使うことができます。

```python
>>> import sys
>>> line = sys.stdin.readline()
hello
>>> print(line)
hello

>>> line = input()
hello
>>> print(line)
hello
>>>
```

ほとんどinput()と同じですが、着目して欲しいのは改行コード“Enter(Return)”も取得されているということです。
上記サンプルを見ると、前者のreadline()は改行コードを含んでいますが、
後者のinput()は省かれています。
そのため、readline()を使う場合、必要であれば“文字列.strip()”などとして行末の改行コードを削ってください。

なお、かなりの小ネタですが、input()などの標準入力を挟むことで、
指示があるまでプログラムをわざと中断させておくという使い方もあります。
たとえばデモプログラムを実行する際に、デモとデモの間にinput()を入れておくと、
ひとつめのデモが終わったあとに、すぐに2つめに入らず標準入力で待ちに入ることができます。
意外と便利な使い方です。

### コマンドライン引数 vs 標準入力

さて、ちょっと余談です。コマンドライン引数と標準入力の2つのユーザー入力方法を示しましたが、
利用するとしたらどちらが優れているでしょうか。
これは個人の好みによるとは思いますが、どちらでもよい場合、
私は「Unixのコマンドの思想に沿っている」という点からコマンドライン引数を支持します。
ここではUnixとしていますが、この思想は、
LinuxはおろかWindowsであってもCUI(テキストのコンソール)を使う限りあてはまる大事な考え方です。
当然、Pythonで作成したプログラムも基本はテキストベースなので当てはまります。
Unixの思想にはいろいろあるのですが、「入力」に関しては以下が当てはまるでしょう。

*	一つひとつのコマンド(プログラム)が小さい範囲で完璧に仕事をこなすべき
*	大きなプログラムになんでもやらせるのは基本的に間違い
*	小さいプログラムを組み合わせることで大きな仕事を実現する

ここで重要となるのは「小さいプログラムを組み合わせる」ことです。
組み合わせる際に「あるプログラムから別のプログラムを呼び出す」ということをよくするのですが、
この場合、標準入力よりもコマンドライン引数のほうが圧倒的に簡単に使えます。
標準入力を使ってしまうと、プログラムが別のプログラムを「インタラクティブ(この出力がされたら、
これを入力するといった具合)」に制御する必要があります。
人間がプログラムとインタラクティブに対話するのは簡単ですが、
プログラムにそれをやらせるのは結構苦労することが多いです。
一方、コマンドライン引数だと、
プログラムを呼び出す際にパラメータを与えるだけで簡単に期待どおりの使い方をすることが可能です。
なので私は、コマンドライン引数のほうを好んで使っています。

ただ、標準入力が有効な場面というのも存在します。たとえば以下の場合です。

*	ユーザーがインタラクティブに操作するプログラムを組む場合
*	コマンドの履歴を残したくない場合(例えばパスワード入力など)

適切なものは時と場合によりますので、どちらが最適なのかよく考えて利用してください。
なお、パスワード入力に関してはgetpassというモジュールもありますので、
パスワード入力を求める場合は、それを使ってもよいでしょう。
