# 変数

{{ TOC }}

## 概要

あいうえお

### 変数の目的

現実のプログラムは複雑であるため、1行のプログラムで全ての処理を作ることはできません。
そのため、複数の行で少しずつプログラムを組み立てていくという作業が必要です。

ただ、複数の行のプログラムを連携させるためには、それを実現するための仕組みが必要です。
様々な文法がありますが、「後ろの行で、前の行の処理結果を利用する」ことが、おそらく一番利用頻度が高く、
それを実現するために「変数」を使います。

変数はデータを格納するための箱のようなものです。
前の行でなんらかの処理をして結果を求めて、それを箱である変数に詰めます。

そして、後の行で変数に詰められているデータを取り出して利用します。

このようにすることで、1行で全ての処理を行うのではなく、
複数の行に分けて処理を実行することができるのです。

変数を利用するイメージは、以下の図のようなものとなります。

![image](./0030_image/02.jpg)

### 変数の宣言と代入

変数の使い方は非常に簡単で、以下のように「宣言」するだけで変数に値が格納されます。

```python
変数名 = 変数に入れたい値
```

変数に値を詰めることを、「代入する」といいます。
Pythonでは変数の宣言と代入は同時に実行されます。

たとえば以下のようなプログラムがあるとしましょう。

```python
a = 'hello'
b = 10 + 5
```

これは変数aを宣言し、それに'hello'という文字列を代入しています。
その次は変数bを宣言し、それに「10 + 5」の計算結果を代入しています。

「変数名」はアルファベットから始まり、
特別なキーワードを避けた英数字と一部の記号(“\_”など)から構成されていれば、
好きなものを使ってかまいません。

特別なキーワードは次章以降で扱うPythonの文法で利用されるものです。
たとえば、条件分岐のifやelseなどは変数名には使えません。

### 変数が持つ値の利用

変数が代入の対象でない場合(つまり「=」記号の左側にいない場合)は、
変数の中に代入されている値が自動的に取り出されて使われます。

以下に例を示します。

```python
>>> a = 5
>>> print(a)
5
>>> b = a + 5
>>> print(b)
10
```

取り出しただけではデータは消失しないので、何度でも利用できます。
たとえば変数aに5を代入した後に、変数aから2回値を取り出していますが、2回とも5が取り出されています。
一般的には、取り出すというよりも“変数aが5を「返す」”というような言い方をします。

ただ、注意してほしいのは「なにか値が代入されている変数」に新しい値を代入してしまうと、
「昔の値」は上書きされてしまうということです。

```python
>>> b = a + 5
>>> print(b)
10
>>> b = a + 6
>>> print(b)
11
```

上記例で、bは10を保持していましたが、そこに11が代入されると10を消失してしまいます。

また、当然ですが「代入されていない変数」、つまり「宣言されていない変数」を使おうとするとエラーとなります。

### 変数に同じ変数の値を加工して代入

変数に同じ変数の値を加工して代入することも可能です。
たとえば、変数aにすでに文字列が入っており、それに別の文字列を追加したいという場合は以下のように書きます。

```
>>> a = 'hello'
>>> a = a + 'python'
>>> print(a)
hellopython
```

上記の「a = a + 'python'」は以下の動きをします。

1.	右のaが'hello'という文字列を返す
2.	それに'python'が結合されて'hellopython'になる
3.	'hellopython'が左のaに代入される

なお、「a = a」のように加工せずにそのまま代入することもできますが、
その処理にとくに意味はありませんので普通はしません。



## コラム: 型と変数

変数の概念はただ、CやJavaなどのほかの言語だともう少し複雑です。
簡単に説明します。
興味がない人は読み飛ばしていただいてかまいません。

Python以外の言語を少しでも学んだことのある人は、先ほどのPythonの変数の使い方に違和感を覚えられたかもしれません。
CやJavaなどは「変数」と「型」が密接に結びついています。
具体的にいうと変数にも型があり、変数の型と代入する値の型は同一である必要があります。

たとえば、Javaで変数xを宣言し、それを利用するには以下のように書きます。

```java
// JAVA
int x;
x = 5;         // OK
x = "Java"     // Error
```

Pythonで変数を利用する場合、変数xの前に「int」というキーワードは存在していませんでした。
intは整数型のことなので、この場合は「整数型の変数x」を作っています。
Javaの変数には必ず型があるので、変数を宣言する(作る)際には必ず「int」といった型を示す必要があります。

上記例では変数を作成した後で、その変数に整数値5と文字列“Java”を代入しています。
変数xは整数型なので、同じ整数型である5は代入できるものの、
文字列型の“Java”は代入できずにエラーとなります。

文字列型の変数もこれと同じです。
文字列を格納するために作成された変数yに文字列を代入することは当然できますが、
整数型である5を代入することはできません。

```java
// JAVA
String y = "Java";   // OK
y = 5;               // Error
```

一方、Pythonの変数にはどのような型でもいれることができるので、
以下のように「整数を代入した変数に文字列を代入する」ことも問題ありません。
そもそもJavaでいう「int」や「String」といった変数の型宣言がPythonのコードにはありませんね。

```python
# PYTHON
x = 5
x = 'python'
```

Python と Java の変数の使い方の違いを図にまとめます。

![image](./0030_image/03.jpg)

ただ、上記のような「変数を使いまわす」ようなコードは一般的には避けたほうがよいです。
一度宣言された変数を「別の使い方で再利用」すると、その変数に何が入っているのかわかりにくくなるため、
プログラミングの行儀がよくありません。専門的な言い方をすると「保守しにくいコード」といわれます。
脱線はこのぐらいにして本題に戻ることにしましょう。
