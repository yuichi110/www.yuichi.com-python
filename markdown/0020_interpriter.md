# Pythonインタプリタ

{{ TOC }}

## 概要

WindowsやMacにPythonをインストールすると、Pythonが使えるようになります。
Pythonを使うにはコンソール(Windowsではパワーシェル、Macではターミナル)で、pythonコマンドを使います。
そうすることでPythonのプログラムを実行したり、対話式のシェルを使うことができます。

## インタプリタ

インストールが完了したので、さっそくPythonを使ってみましょう。
`--version`オプションなしで`python`と打つと、Pythonのシェルを利用できます。

#### コンソール: Pythonシェルを起動

```text
$ python3
Python 3.5.2 (v3.5.2:4def2a2901a5, Jun 26 2016, 10:47:25)
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

画面に以下の「プロンプト」が表示されます。
これはPythonがユーザにプログラムの入力を求めている状態です。

#### コンソール: Pythonシェルのプロンプト

```text
>>>
```

それに続けてPythonのプログラムを書いて実行させます。
今回は簡単な計算をさせます。

#### コンソール: Pythonシェルで足し算を実行

```text
>>> 1 + 1
2
>>>
```

エンターキー(リターンキー)を押すと、入力していたプログラムをPythonが読み取り、
その結果を返します。
今回は`1 + 1`がユーザの入力で、Pythonがそれを読み取って解釈し、結果である`2`を返しています。
計算に使っている「+」は「*演算子*」と呼ばれており、他には「-」などもあります。

#### コンソール: Pythonシェルで文字列を出力

```text
>>> 'hello' + ' python'
hello python
>>>
```

Pythonのシェルでは、プロンプトを通してPythonと「対話的」にプログラミングを行います。
簡単なプログラムの挙動確認であればPythonシェルを使うことが多いです。
Pythonシェルは「インタプリタ」とも呼ばれます。

Pythonシェルはプログラムのちょっとした挙動確認には便利なのですが、
プログラムの「ソースコード(コード)」を書くためのものではありません。

## インタプリタの終了方法

インタプリタを抜けるには「exit()」と入力するか「Ctrl + d　(Controlボタンを押しながらdを押す)」を入力します。

```text
>>> 1 + 1
2
>>> exit()
$
```

### Pythonコマンドのオプション

先ほどの「-c」オプションと同じように、pythonコマンドに続けてオプションを付けることで、
特別な動作をさせることができます。

Pythonコマンドのオプションを確認するオプションとして「-h」があります。
どのようなオプションが存在するか現時点で覚える必要はありませんが、
「-h」で「ヘルプ」を確認できることは覚えておいて下さい。

#### コンソール: pythonコマンドのオプション確認

```text
$ python3 -h
usage: /Library/Frameworks/Python.framework/Versions/3.6/Resources/Python.app/Contents/MacOS/Python [option] ... [-c cmd | -m mod | file | -] [arg] ...
Options and arguments (and corresponding environment variables):
-b     : issue warnings about str(bytes_instance), str(bytearray_instance)
         and comparing bytes/bytearray with str. (-bb: issue errors)
-B     : don't write .py[co] files on import; also PYTHONDONTWRITEBYTECODE=x
-c cmd : program passed in as string (terminates option list)
-d     : debug output from parser; also PYTHONDEBUG=x
-E     : ignore PYTHON* environment variables (such as PYTHONPATH)
-h     : print this help message and exit (also --help)
-i     : inspect interactively after running script; forces a prompt even
         if stdin does not appear to be a terminal; also PYTHONINSPECT=x
-I     : isolate Python from the user's environment (implies -E and -s)
-m mod : run library module as a script (terminates option list)
-O     : optimize generated bytecode slightly; also PYTHONOPTIMIZE=x
-OO    : remove doc-strings in addition to the -O optimizations
-q     : don't print version and copyright messages on interactive startup
-s     : don't add user site directory to sys.path; also PYTHONNOUSERSITE
-S     : don't imply 'import site' on initialization
-u     : unbuffered binary stdout and stderr, stdin always buffered;
         also PYTHONUNBUFFERED=x
         see man page for details on internal buffering relating to '-u'
-v     : verbose (trace import statements); also PYTHONVERBOSE=x
         can be supplied multiple times to increase verbosity
-V     : print the Python version number and exit (also --version)
         when given twice, print more information about the build
-W arg : warning control; arg is action:message:category:module:lineno
         also PYTHONWARNINGS=arg
-x     : skip first line of source, allowing use of non-Unix forms of #!cmd
-X opt : set implementation-specific option
file   : program read from script file
-      : program read from stdin (default; interactive mode if a tty)
arg ...: arguments passed to program in sys.argv[1:]

Other environment variables:
PYTHONSTARTUP: file executed on interactive startup (no default)
PYTHONPATH   : ':'-separated list of directories prefixed to the
               default module search path.  The result is sys.path.
PYTHONHOME   : alternate <prefix> directory (or <prefix>:<exec_prefix>).
               The default module search path uses <prefix>/pythonX.X.
PYTHONCASEOK : ignore case in 'import' statements (Windows).
PYTHONIOENCODING: Encoding[:errors] used for stdin/stdout/stderr.
PYTHONFAULTHANDLER: dump the Python traceback on fatal errors.
PYTHONHASHSEED: if this variable is set to 'random', a random value is used
   to seed the hashes of str, bytes and datetime objects.  It can also be
   set to an integer in the range [0,4294967295] to get hash values with a
   predictable seed.
PYTHONMALLOC: set the Python memory allocators and/or install debug hooks
   on Python memory allocators. Use PYTHONMALLOC=debug to install debug
   hooks.
```


## コラム: Python2とPython3の違い

Python2とPytho3のプログラムには一部互換性がありません。
そのため、Python2で作ったコードをPython3で使うことや、
その逆ができないことが多々ありますので注意してください。

もし仮にPython2のプログラムを書く場合であっても、それがPython3で動くように書く癖をつけておいてください。
完全に互換性をもたせるのは大変なのでおすすめしませんが、
Python3で廃止される古いPython2の書き方に固執するのはよくありません。

ちなみにPython 2と3の両方をインストールして使い分けることも可能ですので、
最終的に2.xを使いたいかたも、3.xをインストールして大丈夫です。

## 用語

* Python2 : 古いPythonの種類。2.X として様々なバージョンがあるが、2.7が最後
* Python3 : 新しいPythonの種類。3.X として開発中。
* パスを通す
* 環境変数
* コンソール
* パワーシェル(PowerShell)
* ターミナル(Terminal)
* Pythonシェル
* プログラムファイル
* コメント
* \#(ハッシュ、シャープ)
* シングルクオテーション
* ダブルクオテーション
* トリプルクオテーション
* エラー(例外)
