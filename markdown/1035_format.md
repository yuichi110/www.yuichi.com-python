## 文字列の生成

### 文字列の結合

テキストを整形して文字列を作ることはよくあります。
たとえば、文字列型の名前と数値型の年齢を合わせて「名前 : 年齢」とするには以下のようにすればできます。

```python
text = 'taro' + ' : ' + str(35)
print(text)
# taro : 35
```

上記は文字列の結合を使って文字列を生成しています。
数値型と文字列は直接結合できないため、数値35はstr()関数を使って一旦文字列にしています。

3つの文字列ぐらいであれば結合を使うことで文字列を作れますが、
あまりに長くなってくると結合で文字列を作るのは非常に見苦しくなってきます。

### format メソッド

結合の代わりに、文字列にテキストや数字を埋め込むという手法で文字列を生成することができます。
これを実現する format メソッドを使うと非常にシンプルに文字列を作ることができます。

```python
text = '{} : {}'.format('taro',35)
print(text)
# taro : 35
```

文字列のformat関数(メソッド)の引数に {} に対応する文字列なり数値なりを与えています。
ひとつ目の{}がfortmatメソッドの1つめの引数に対応し、2番目の{}が2番目の引数に対応、
といった具合で文字列に引数を埋め込んでいきます。
私はそれほど利用しませんが、この format はもっと複雑な使い方もできます。
たとえば {} の中に数字やキーワードを埋め込むことで引数の何番目をそこに埋め込むかを調整できます。

```python
print('{0} {2} {1} {0}'.format('a', 'b', 'c'))
# a c b a

print('{user} : {age}'.format(user='taro', age=35))
# taro : 35
```

上記のように同じ引数を何度も埋め込むこともできます。キーワード引数を使うこともできます。

### formatメソッドのフォーマット

さらに format メソッドは文字列に埋め込む「フォーマット(形式)」も調整できます。
フォーマットを指定するには「:」のあとにフォーマットを指定する書式を書きます。
かなり細かく調整できますが、いくつか便利なものだけ紹介します。

まず数字の桁の調整です。

```python
# 5桁
print('{:5}'.format(50))
# '   50'

print('{:5}'.format(255))
# '  255'

# 5桁(左寄せ)
print('{:<5}'.format(255))
# '255  '

print('{:<5}'.format(50))
# '50   '

# 5桁(0埋め)
print('{:05}'.format(50))
# '00050'

print('{:05}'.format(255))
# '00255'

# 位置指定やキーワードとの併用
print('{ab:05} {cd:05}'.format(ab=50, cd=255))
# '00050 00255'
```

コロンの後に数字を指定することで表示される桁数を調整できます。
0を指定する桁数の前に付けることで0埋めされます。

数値型の表示を調整することもよくあります。

```python
# 整数、少数
print('{:d}, {:f}'.format(5, 5.5))
# '5, 5.500000'

print('{:.3f}, {:.5f}'.format(5.5, 5.5))
# '5.500, 5.50000'

# 3桁区切り
print('{:,}, {:10,}, {:010,}'.format(111111, 111111, 111111))
# '111,111,    111,111, 00,111,111'

# 基数変換(2進数、8進数, 10進数, 16進数)
print('{0:b}, {0:o}, {0:d}, {0:x}'.format(100))
# '1100100, 144, 100, 64'
```

### 書式化演算子 %

format メソッドに似た書式化演算子(%)も Python3 では利用できます。
書式化演算子は format メソッドより気軽に使えますが、そのぶん単純なことしかできません。
以下のように使います。

```
ベースとなる文字列 % 埋め込む値
ベースとなる文字列 % (埋め込む値1, 埋め込む値2,..)
```

ベースとなる文字列に値を一つだけ埋め込む場合はそれを % 記号の後におきます。
そして複数の値を埋め込む場合は % 記号のあとに埋め込む要素をタプルにまとめて配置します。
例えば以下のようになります。

```python
text = 'hello %s' % 'HELLO'
print(text)
# hello HELLO

text = 'hello %s python %s' % ('HELLO', 1)
print(text)
# hello HELLO python 1
```

ベースとなる文字列の「%s」の箇所に値が埋め込まれていることがわかります。
この %s はどのような形で値が埋め込まれるかを指定する「変換指定子」と呼ばれており、
%s は文字列、%d は整数、%f は少数として利用されます。

```python
print('hello %s python' % (5.5))
# hello 5.5 python

print('hello %d python %f' % (5.5, 5.5))
# hello 5 python 5.500000
```

format メソッドと書式化指定子は奥が深く、様々な使い方ができます。
ただ、込み入った使い方は頻繁には利用されないため、必要になったタイミングでドキュメントなどを参照すれば問題ないと思います。
C言語などの printf に慣れているかたは書式化演算子のほうが書式を見慣れているため魅力的に見えるかもしれません。
ただ、今後の Python は format メソッドを主流としていく見込みなので、可能であれば format メソッドを使うようにしてください。

リストに含まれる複数の文字列を「特定の文字列」で結合していくことも可能です。
これはちょうど先程のsplit メソッドの逆です。
2次元配列(リストにリストが入っている)に格納された情報をCSV形式でファイルに書き出したりする際に便利な手法です。
書式は「結合に使う文字列.join(文字列のリスト)」となります。
空白で結合すればそのままつながります。

```python
a = ['1', 'taro', '35', 'male']
print(', '.join(a))
# 1, taro, 35, male

print(''.join(a))
# 1taro35male
```
