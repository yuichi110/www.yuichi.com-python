## クラスとインスタンス化

構造体を使うには「型の定義」と「作った型のデータを作成」という2つの手順を踏むのでした。
あいにくPythonには構造体はないのですが、代わりに構造体を発展させた「クラス」と呼ばれる機能を使うことができます。
クラスは簡単にいってしまうとオブジェクトを作る「型」です。
そしてオブジェクトは「構造体に特殊な関数であるメソッドをもたせたもの」だといえます。
実際はもっと多くのことができるのですが、本章ではとりあえずクラスとオブジェクトの関係に注目したいので、
難易度の低い「オブジェクトを構造体のように使う方法」についてお話します。

Python におけるクラスの定義も、構造体と同じように「クラスの名前」と「オブジェクトが持つデータ」を宣言します。
それは、以下のようになります。

```python
class UserInfo:
    def __init__(self):
        self.name = 'Unknown'
        self.birth = 0
        self.address = 'Unknown'
```

クラスは構造体よりも高機能なため、少し複雑になっていますが、class UserInfoでクラス名を宣言し、
そのなかの関数の定義のような箇所でname、birth、addressという変数を作成しています。
それぞれの変数は’Unknown’, 0, ‘Unknow’ という値で初期化されています。
`def __init__`や`self`は先述したメソッドに関わるものなので次章以降で改めて話します。
今回はとりあえずそういうものなのだと捉えてください。

当然ながらクラスも構造体のようにデータを作ることもできます。ただ、その方法は異なってきます。

```python
taro = UserInfo()
```

上記のように「クラス名()」とすることで、そのクラスから実際のデータを作ることができます。
このクラスから作成されたオブジェクトを「インスタンス」と呼びます。
通常、インスタンスとオブジェクトは同じ意味で使われますが、オブジェクトのほうが広い概念です。
インスタンスという呼び名はクラスから作成された場合以外にあまり用いられません。
このあたりの詳しい話は現時点でしても難しいため、後半で扱います。
クラス UserInfo とインスタンス taro は、リストで例えると UserInfo が list という型にあたり、
taro は [1,2,3] といった具体的なリストのデータとなります。

構造体と同じように「オブジェクトが持つデータの名前」を使うことで、インスタンスの各データに対してアクセスできます。
あえて書くほどでもありませんが、「オブジェクト.データ名」というかたちでアクセスします。
なお、インスタンスが持つこれらのデータのことを「インスタンス変数」と呼びます。
name、birth、addressはインスタンス変数です。
Pythonではあまり聞きませんが、インスタンス変数は「フィールド」という呼ばれ方もします。

インスタンス変数の値を出力してみます。

```python
print('{}, {}, {}'.format(taro.name, taro.birth, taro.address))
# Unknown, 0, Unknown
```

作られたデータを確認すると、クラス定義の中で書かれた初期値を出力していることがわかります。

taro オブジェクトが持つインスタンス変数は参照するだけでなく、値を書くこともできます。
その方法は参照と同じように代入を行うだけです。

```python
taro = UserInfo()
taro.name = 'taro'
taro.birth = 1986
taro.address = 'tokyo'

print('2: {}, {}, {}'.format(taro.name, taro.birth, taro.address))
# taro, 1986, tokyo
```

インスタンスを作成した後にインスタンス変数をセットしていくのではなく、
構造体のように最初から 'taro'、1986、'tokyo'などという値をインスタンスに与えることもできます。
ただ、それがどう実現されるか理解するにはもう少しクラスについて理解する必要があります。
そのため次章以降の解説とさせてください。

構造体とクラスについて学んできましたが、今の段階で覚えておいてもらいたいことは以下の3点だけです。

*	クラスは雛形で設計図のようなもの
*	インスタンスはクラスから作られる実体
*	インスタンスにどのようなデータを持たせるかはクラスで定義する
*	インスタンスとオブジェクトはほぼ同じ意味だが。オブジェクトのほうが広範囲の概念

クラスとインスタンスはちょうど、たい焼きの型枠とたい焼きのような関係かもしれません。
たい焼きはその枠型という設計図に従って量産されます。
どういうたい焼きを焼きたいかによって、そのもとになる「たい焼きの型枠」が変わってきます。
いったん型枠さえ作ってしまえば、何個でも実体としてのたい焼きが作れます。

クラスもこれと同じで、インスタンスがどういうようなデータ(インスタンス変数)や処理(メソッド)を持ちたいかによって、
どういうクラスを作るかが変わってきます。
そしていったんクラスを作ってしまえば、インスタンスは好きなタイミングで好きな数だけ作ることが可能です。

両者の関係のイメージ図を以下に記載します。

![image](./1025_image/01.jpg)

なお、作成されたインスタンスのクラス名を得る場合は今まで使っていた type 関数を使うことで実現できます。

```python
unknown_instance = [1,2,3]
print(type(unknown_instance))
# <class 'list'>

print(unknown_instance.__class__)
# <class 'list'>
```

インスタンスの特殊な属性である`__class__`を呼んでもクラスが得られます。
特殊属性については後述します。

### クラスの命名ルール
そしてクラス名なのですが、一般的には複数の単語から構成され、
キャメルケース(Camel case)とよばれる単語と単語を大文字で区切る方式が採用されます。
例えば以下のようなものです。

*	Apple
*	RedApple

1単語だけで構成されていれば先頭が大文字になるだけですが、2単語以上の場合は区切りも大文字になっています。
このでこぼこした感じがラクダ(Camel)に似ているのでキャメルケースと呼ばれています。
一目でクラスと分かるようにするためにこの名前の付けルールは守って下さい。
