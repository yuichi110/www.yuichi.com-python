### ラムダ式

今までの関数はdefを使って宣言してきました。
ただ、関数渡しを利用する場合は「使い捨ての関数」を渡すだけで十分な場合があります。
そのような場合、ラムダ式(lambda)を使って無名関数を作ると簡単です。

lambda式は「lambda 引数: 式」という形で関数を書くと、
その関数をオブジェクトとして返します。
defによる関数の宣言と異なり、関数名がないことがわかります。
そのため「無名関数」と呼ばれているのです。
実際に利用してみます。

```
my_print = lambda x : print('my_print : {}'.format(x))
my_print('hello')
# my_print : hello
```

上記は引数 x を受け取り、それに “my_print : “ という文字列をつけて print する無名関数を作成し、
それを変数 my_print に格納して使っています。
このラムダ式は変数に代入されて関数として使われていますが、変数にいれなくても使うことができます。
試しにこのラムダで作られたものが何者なのか見てみます。

```python
my_print = lambda x : print('my_print : {}'.format(x))
print(my_print)
# <function <lambda> at 0x1013dad90>
```

インタプリタでラムダが返したもの(実際はオブジェクト)を評価してみるとラムダの関数だと評価されています。
変数に代入しなくても関数なので、いきなりこれを実行することもできます。

```python
(lambda x : print('my_print : {}'.format(x)))('hello')
# my_print
```

上記のコードは「(ラムダで作られた関数)(引数)」としています。
結果を見てもらうときちんと動作をしていることが分かります。

上記のラムダ式ですが、今までの関数の書き方であれば以下と同じです。

```python
def my_print(x):
  print('my_print : {}'.format(x))

my_print('hello')
# my_print : hello
```

ラムダと一般的な関数のどちらがプログラムとして分かりやすいかというと、
一般的には通常の関数の作り方だと思われます。
ただ、使いどころによってはラムダのほうが適する場所が存在します。
それが先ほどの「関数渡し」、それも簡単な処理の場合です。
具体例に関しては後ほど多く扱うのでラムダの利用場面については話を切り上げて、
ここではラムダの書き方をもういくつかご紹介したいと思います。

まず引数や返り値ですが、これも関数と同じでいくつか定義をすることができます。たとえば 2 つの引数をたして返す関数は以下のようになります。

```python
adder = lambda x, y : x + y
print(adder(2, 3))
5
```

引数を複数とる場合はコンマでつなげ、
最後の式(この場合は x + y)が return 文なしに結果として返されていることがわかります。

lamdaが生成する関数もオブジェクトですので、リストなどに格納することもできます。
それほど使い道はないかもしれませんが、以下のように複数処理を連続で実施したい場合にときどき使います。

```python
funcs = [(lambda x,y:x+y), (lambda x,y:x-y), (lambda x,y:x*y),(lambda x,y:x**y)]

for fun in funcs:
  print(fun(5,10))

# 15
# -5
# 50
# 9765625
```

個人的にはPythonではlambda式は後ほど述べる filter といった関数以外ではそれほど多く使いません。
上記のような簡単な関数をその場限りで使うのにおいては便利ですが、
そうでない限りはdefで宣言し、それを必要に応じて呼び出すことのほうがコードとして分かりやすいです。

たとえば上記のコードは以下のように書き直せます。

```python
def fun1(x,y):
  return x + y
def fun2(x,y):
  return x * y
def fun3(x,y):
  return x ** y

funcs = [fun1, fun2, fun3]
for fun in funcs:
  print(fun(5,10))
```

defを使うと不必要に宣言数を増やしてしまいますし、lambdaで複雑な処理を書くと非常に見づらいです。
それぞれのメリット、デメリットを考えて適切に利用する必要があります。
一般的には処理の内容が複雑であればdefで宣言し、簡単でかつ使いまわさない場合はlambdaを使うことになるかと思います。
