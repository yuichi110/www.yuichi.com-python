# 型と変数

{{ TOC }}

## 概要

プログラミングには様々なデータが存在します。
たとえば計算をするための「数値」であったり、テキストを扱うための「文字列」などがあります。

Pythonや他のプログラミングでは「データの種類」のことを「型」と呼んでおり、
「型」と「型ができる処理」は密接に関係しています。

たとえば数値であれば足し算引き算といった処理が可能で、
文字列であればアルファベットを大文字にするといった独特な処理ができます。

また、データを使うためには「変数」というプログラミングの仕組みが使われます。
複雑なプログラムを作るには「処理した結果をあとで使う」ということが必要になり、
その結果を保存するために変数が使われます。

## 型

プログラミングで使われるデータには「型」と呼ばれるものがあります。
たとえば、1や2というのは「数値(整数)」という型であり、
“Hello”というテキストは「文字列」という型です。

プログラミングをする際に、初心者の方はこの「型」について意識することが重要です。
なぜかというと、「型」と「処理」は密接に結びついているためです。

例をあげて説明します。
Python のプロンプトを立ち上げて以下を実行してみてください。

```python
>>> 3 + 3
6
>>> 3 - 1
2
```

上記のように数値は足し算、引き算することができます。
当たり前といえば当たり前です。

では、文字列はどうでしょうか。

文字列は ' ' でアルファベットや記号を囲むことで作成できますので、
先ほどと同じように足し算と引き算をさせてみます。

```python
>>> 'hello' + ' python'
'hello python'
```

文字列の足し算はできました。
文字列の後ろに別の文字列をくっつけるという「結合」処理がされています。
文字列の結合は数値の足し算とは違いますが、これも直感的な処理内容といえるのではないでしょうか。

次は文字列の引き算です。

```python
>>> 'hello' - 'python'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for -: 'str' and 'str'
```

文字列の引き算では、エラーが表示しました。

このエラーの内容は「operand(オペランド)」という言葉で小難しく説明されていますが、
要するに「文字列 - 文字列」という処理はできないということを言っています。

最初にも説明しましたが、「型」と「処理」は密接に結びついています。
数値であれば足し算も引き算もできますが、文字列は足し算(結合)しかできません。
同様に文字列でしかできない処理というものも存在しています。

すべてを暗記する必要はありませんが「どの型がどのような処理をすることができるか」
「その処理をするにはどういう書き方をすればいいか」ということをある程度知っておくことは重要です。
これらの詳細はプログラミング言語ごとに若干異なりますが、他の言語でもそれほど大きな違いはありません。
そのため、型と処理の関係の知識がたまると言語というよりプログラミング自体の知識が向上します。

以下に型と処理の関係を示す図を記載します。

![image](./0030_image/01.jpg)

なお、ぱっと見て「同じに見えるデータ」であっても、型が違えば別物ですので注意が必要です。
例えば数値の3と、文字列の'3'は別物です。

```python
>>> 3 - 1
2
>>> '3' - '1'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for -: 'str' and 'str'
```

数値の3は引き算に使えますが、文字列の3は使えていません。
繰り返しますが、同じ数字であっても、数値の型(整数型)の3と、文字列型の3は別物です。

## 型の確認 (type)

変数にどの型のデータが入っているか分からない場合はそれを type 関数に与えるとすぐに分かります。

```
>>> a = 'hello'
>>> type(a)
<class 'str'>
```

たとえば上記は変数 a に文字列型が入っていることがすぐに分かります。
これは変数以外でも例えば関数の返り値の型を調べるといった目的でも便利です。
C や Java といった言語であれば常に型を気にしてコードを書く必要があるため問題になりませんが、
Python はどの型を使っているか分からなくなることがあるため、その際は type 関数で調べて下さい。

## 型の変換 (キャスト)

ある型を別の型に変換することを「キャストする」といいます。
たとえば数字から文字列型、文字列型から数字への変換は以下のように行います。

```
>>> str(123)
'123'
>>> int('321')
321
>>> float('321.123')
321.123
```

まだ学んだ型が多くないため多くは語りませんが、
基本的にキャストはコアとなる型(本章で学んだものや後ほど学ぶ set や dict など)の間で使うことがほとんどです。
主要なものは都度覚えていくことが望ましいですが、必要以上に多くを覚える必要はありません。

### 文字列へのキャスト

これに加えて関数を使う方法もあります。
たとえば数値などの「文字列でない型」を文字列型にするにはstr関数を使います。
この関数で囲ったすべての型は文字列に変換されます。

```
>>> str(5)
'5'
>>> str(5.5)
'5.5'
```

この関数は文字列に「文字列以外の型」を結合する際によく使われます。
この変換をしないとエラーになる場合が多々あります。
たとえば、以下の1行目の「文字列 + 数値」はエラーとなりますが、2行目は「文字列 + 文字列」なので問題ありません。

```
>>> 'hello' + 5
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: cannot concatenate 'str' and 'int' objects
>>> 'hello' + str(5)
'hello5'
```
