# モジュールの利用

{{ TOC }}

## 概要

あいうえお

### 標準ライブラリとモジュール

次に「小数点の切り捨て」をします。

小数点の切り捨てもabsと同様に関数として提供されています。
ただ、絶対値を得るabsほどよく使われる処理ではないので「組み込み関数(いきなり使える関数)」としては提供されていません。

小数点の切り捨ての関数は「標準ライブラリ」という、特定の処理をするための「ツール」のなかの、
ひとつの機能として提供されています。

標準ライブラリはそのなかに、特定機能を担当する「モジュール」をいくつも持っています。
たとえば、数学関連の「mathモジュール」や、OSの機能を利用するための「osモジュール」などがあります。

組み込み関数以外の「モジュールに属する関数」を使う場合は、
まず「◯◯というモジュールを使いますよ」という宣言をする必要があります。

切り捨ては「数学」的に利用される機能ですので、「mathモジュール」に含まれています。
そのため、今回は「mathモジュールを使いますよ」という宣言をして、そのうえで小数点の切り捨て関数を使います。

具体的には次のようになります。

```
>>> import math
>>> math.floor(5.5)
5.0
```

importは日本語でいうと「取り込む」といったニュアンスがあります。
そのため、「import math」は「mathモジュールを取り込む」と宣言しています。

モジュールを取り込むと、そのモジュールの関数を使えるようになります。
2行目はmathモジュールのfloor関数を呼び出しをしています。

モジュールに属する関数は、“モジュール名.関数()”というスタイルで呼び出すことができます。
5.5を与えて5.0を得ているのは先ほどのabsと同じですが、関数名の前にモジュール名がついているところが違います。
組み込み関数とモジュールの利用方法を以下に図示します。

![image](./0025_image/02.jpg)

なお、mathモジュールにはほかの機能もあり、floorはそのひとつにすぎません。
切り捨てがあるのですから切り上げも当然ながらあります。

また、実際に試してみるとわかりますが、モジュールの関数をimportなしに使おうとすると、
エラーが発生します。

```python
$ python3
>>> math.floor(5.5)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'math' is not defined
```

エラーには「math」は定義されていないと表示されています。

この「○○ is not defined」は良く見かけるエラーです。
宣言などがされていない何か(代入されていない変数、定義されていない関数など)を、
利用した場合に発生します。


# モジュール

{{ TOC }}

## 概要

作成するアプリケーションが複雑なものであれば、そのプログラムの行数は数千、数万となります。
一つのファイルにそれを収めるのは、どこになにがあるか分からなくなるため推奨されません。

モジュールはPythonのプログラムを分割するための仕組みです。
Pythonのプログラムを処理に応じていくつかのモジュールに分類することで、
上記のような状況が管理しやすくなります。

また、自分が作成するプログラムだけでなく、汎用的な処理(例えば時間関係、
ランダムな処理など)には既存のモジュールが用意されています。
既に作成されているモジュールを取り込んで使うことで、自分で作成できない機能を利用したり、
開発の手間を省くことが可能になります。

本ページではこのモジュールについて扱います。

## なぜモジュールが必要化

Pythonのプログラムは書けば書くほど大きくなります。
数百行のコードでしたらひとつのファイルに書けないことはないですが、
何千行にもなってくるとコードを複数のファイルに分けたほうが管理はしやすいです。
これは日常生活の整理整頓とまったく同じです。たとえば洋服ダンスがあるとすると、
それを使いやすく使うためには下着、シャツ、ズボンといった種類ごとに引き出しを分けて使うと思います。
ひとつの大きなダンボール箱にすべての服をつっこんでしまうとどこに何があるかわからなくなり、
なおかつ服もきれいに管理できずにシワシワになってしまいます。
プログラムのファイルを分けないと、後者のような乱雑な服の管理法に近い形でコードを書くことになります。
ひとつの大きなファイルのなかにさまざまなコードをゴチャゴチャと書くのでどこで何をやっているのかわからなくなってきます。

一方、特定の処理ごとにファイルを分けて「このファイルはXXの処理」「このファイルはYYの処理」などと整理すると、
XXの処理を追加したり修正したりする際にすぐに場所がわかります。
Pythonではこの「ファイルに分けられた各プログラム」のことをモジュールと呼んでいます。
既存のモジュールを使ったり、自分で新しくモジュールを使ってプログラムを書いていったりすることになります。

![image](./0050_image/01.jpg)

## モジュールの利用

まずはPythonが提供してくれているモジュールを利用することからはじめていきましょう。
モジュールを利用するには「import宣言」が必要です。
たとえば、数学処理がまとめられたmathモジュールを利用するには以下のようにします。

```python
# import モジュール名
import math
```

このようにimportをすると、mathモジュールに入っている関数などが利用できるようになります。
たとえばmathモジュールの切り捨て関数を使うには以下のようにします。

```
>>> import math
>>> math.floor(5.5)
5.0
```

モジュール内の関数を呼び出すには"モジュール名.関数()"とします。
math モジュールに含まれる関数であれば全て「math.関数名()」という形で呼び出します。
import されるモジュール名が長かったりわかりにくかったりする場合はそれに別名を付けることが可能です。
それは以下のように行います。

```python
# import A as B
# モジュール A を B として import
import tkinter as tk

font=('Helevetica', 32, 'bold')
# 呼び出しは tk
label = tk.Label(text='Hello Python', font=font, bg='red')
label.pack()
label.mainloop()
```

上記例では tkinter と呼ばれている GUI のモジュールを tk として import しています。

モジュールの関数を呼び出すたびに毎回モジュール名を書くのが面倒であれば「from」を使うことで、
モジュール内の関数をモジュール名なしで呼び出すことも可能になります。

```python
# from モジュール名 import 関数名
from math import floor

print(floor(5.5))
# 5
```

頻繁に使う関数であればこのように使用しても構いませんが、
一般的には from を使わずに import のみを行うほうが分かりやすいコードになります。
なぜならその関数がどのモジュールに属しているかひとめで分かるからです。

先ほどの 「import A as B」とこの from を組み合わせることで、
あるモジュールに属する関数を別名で使うこともできます。

```
# math モジュールの floor 関数 を f として import
from math import floor as f

print(f(5.5))
# 5
```

2つのモジュールが同名の関数を持っていて、2つとも使いたいといった場合に利用可能ですが、
そのような状況ではモジュール名ごと関数を書くほうが賢明かと思います。

モジュール内の関数すべてをモジュール名なしで呼び出すには以下のようにワイルドカードを使います。
ただ、このような乱雑なモジュールの利用法は「名前の衝突(同じ名前が２箇所で使われてしまっている)」
などの問題が発生しかねないので、あまり推奨できません。

```
>>> from math import *
```

あるモジュールをテストするといったシナリオでは有効な使い方ですが、
本番環境用のコードでは使用しないほうがよいです。

## PIP
