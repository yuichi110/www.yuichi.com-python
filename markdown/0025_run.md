# プログラムファイルの実行

{{ TOC }}

## 概要

Pythonのインタプリタは1行ずつしか実行することができません。
きちんとしたプログラムを開発するには「プログラミング用のエディタ」でコードを書く必要があります。

ファイルに書かれたプログラムはコンソールからpythonコマンドを使って実行します。

## 開発の流れ

Pythonのインタプリタでは、「ユーザーからの入力」と「Pythonの処理と出力」を繰り返します。
ユーザーがいちいち入力をしないと何もできないので、プログラムを使ってなんらかの処理を「自動化」する用途には向いていません。

Pythonに決められた処理を実行させたい場合は「ファイルに書かれたPythonのプログラムをPythonに実行させる」という手法を使います。
プログラマは実行したい処理をあらかじめファイルに書いておき、それをPythonに実行させるという流れです。

Pythonでのプログラムの開発にはプログラミングに適した「**エディタ**」を使います。
Windowsのノートパッドで開発することもできますが、
プログラミング用のエディタには「**シンタックスハイライト**」と呼ばれる文法を解釈して文字を色付けする機能や、
「**オートインデント**」と呼ばれる整形機能があります。
高機能なエディタでは「**補完**」と呼ばれる入力候補を示してくれる機能すらあります。

Pythonでの開発は一般的には自分の好きなプログラミング用のエディタかプロジェクトで選定されたエディタで開発を行い、
それをコンソールから実行するという流れをとります。

## IDLEでの開発

Pythonをインストールすると「**IDLE**」と呼ばれる開発環境も同時にインストールされています。
プログラミングを全くしたことがない初心者はこれを使うのが簡単ですので、IDLEを使った開発方法をまずは紹介します。

次は「IDLE」と呼ばれるPythonの開発環境を使ってコードを書いてみます。
IDLEは先ほどのようなプロンプト画面も使えますし、Pythonを書くのに適したエディタの機能も持っています。
では、さっそくIDLEを立ち上げてみましょう。

Windowsは、Windows メニューにある「すべてのプログラム」から「Python」を選択し、
その下にある「IDLE (Python GUI)」を選べば起動します。
Macは、アプリケーションフォルダ配下の「Python」ディレクトリの下に「IDLE」がありますので、
それをダブルクリックして起動させます。

起動すると以下のようなPythonインタプリタの画面が立ち上がってきます。
先のページと同じように計算をさせたり、文字を表示させたりすることもできます。

![image](./0025_image/01.png)

IDLEはインタプリタだけでなく、Pythonの開発用のエディタとしても使うことができます。
新規ファイルの画面を開くには、IDLEのメニューから［File］ -> ［New File］とします。

![image](./0025_image/02.png)

これに以下の文を書き込んで「test.py」というファイル名で保存(［File］ -> ［Save］)してください。
ここにある「print」はカッコのなかにあるデータを画面に表示しなさいという命令になります。

```python
print(1)
print(2)
print(3)
print('hello')
```

![image](./0025_image/03.png)

ご存知のようにファイルの拡張子(.txtや.mp4など)は、そのファイルがどの種類のものかを表します。
Pythonのプログラムファイルは拡張子が「.py」となります。

IDLEのエディタが選択されている状態で「F5」ボタンを押すと、
このファイルがPythonで実行され、結果がインタプリタ側の画面に表示されます。
Macで「F5」を実行するには、「fn」キーを押しながら「F5」ボタンを押す必要がありますので注意をしてください。
また、プログラムを実行するにはファイルが保存されている必要があります。

![image](./0020_image/09.png)


## IDLE以外のエディタでの開発

IDLEは小規模なPythonプログラムの開発に十分な機能を持っています。
ただ、本格的な開発をするにはPythonのプログラミングエディタや「**統合開発環境(IDE)**」を使うのが一般的です。

プログラミング用のエディタはプログラムを書く上での様々な便利な機能があります。
統合開発環境はそれに加えて実行をしたり、プロジェクト単位でファイル群を扱ったりする機能があります。
Javaなどの開発では統合開発環境の利用が事実上必須ですが、
Pythonなどのスクリプト言語はプログラミング用のエディタで開発することのほうが多いです。



先程はIDLEからファイルの実行をしましたが、コンソールからpythonのプログラムファイルを実行することも可能です。
Windowsのパワーシェルや、Macのターミナルで「pythonコマンドに続けてファイルを指定する」ことで、
そのファイルに書かれたPythonのプログラムが実行されます。

試しに、先ほどIDLEで作成した「test.py」をターミナルから起動してみます。
IDLEと同じ出力があることからプログラムがきちんと動いていることが分かります。

![image](./0020_image/10.png)

また、プロンプトを見てもらうと分かるように「pythonファイルがあるディレクトリ」に移動してからファイル名を与えてプログラムを実行しています。
違うディレクトリで実行するファイルを指定する場合は、
相対パス(自分がいる場所を起点としたファイルやディレクトリの場所)なり、
絶対パス(ファイルシステムのルートを起点としたファイルの場所)なりを指定する必要があります。

なお、以下のように自分の好きな高機能エディタとターミナルを並べて開発するスタイルや、
PyCharm といった IDE (統合開発環境) を使った開発が現場では一般的です。
IDLEは最初から使えるので便利なのですが、開発に必要な機能がそれほど多くないため、
大規模な開発ではそれほど利用されません。

ある程度コードが書けるようになったら、
自分にあった開発環境を模索してみてもいいかもしれません。

![image](./0020_image/11.png)


### Pythonのプログラムの中で日本語を使う方法

日本人である私達がプログラムを書く場合、日本語を利用する状況は多いはずです。

日本語などのアルファベット文字以外の扱いについては、
後ほど詳細に説明します。
現時点では「UTF-8」という文字コードでプログラムを書けば、
Python3では日本語を使えると覚えておいて下さい。

Windowsでよくつかわれている「Shift-Jis」などは、Python3のデフォルトの文字コードではありません。
特別な宣言なしにShift-Jisを使うと、プログラムが実行できないので注意をしてください。
逆に言えば、宣言をすればShift-Jisの日本語も使えます。


### Pythonコマンドで直接プログラムを実行

この項目はそれほど一般的でないため、初心者のかたは読み飛ばして頂いて構いません。

Pythonでプログラムを実行する方法は、先に説明した「Pythonシェルを使う」ことと、
「Pythonのプログラムファイルを実行する」ことがほとんどです。

ただ、これらに加えて「Pythonコマンドに続けてプログラムを書き、それを実行する」という方法があります。
例えば以下のようなものです。


#### コンソール: Pythonプログラムをコマンドに書いて実行

```text
$ python3 -c "print(1+1)"
2
```

Pythonコマンドに続けて、「-c」オプション、そして実行するプログラムが書かれています。
その実行結果が2となっていることから、「print(1+1)」が実行されていることがわかります。

このように「-c」オプションを使うと、プログラムを直接書いて、実行することができます。

ただ、「-c」に続けて記述するプログラムには、改行を含むことができません。
そのため、プログラムは1行で完結する必要があり、複雑なプログラムを書くには適しません。

利用場面はそれほど多くありませんが、Pythonのプログラムファイルを用意する必要がないため、
以下のような使い方ができます。

* 手順書で「これを実行してください」などと示す
* SSH 経由で他のマシンに処理を実行させる
* シェルのパイプと組み合わせて使う

1行で複雑なプログラムを書くには、高いプログラミングスキルを必要とします。
そのうえ、開発もめんどうなうえに、書かれているプログラムを呼んでも分かりにくいです。
可能であれば、プログラムファイルにプログラムを書き、それを実行するようにしてください。
